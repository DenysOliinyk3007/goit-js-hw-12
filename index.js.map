{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loaderClass = document.querySelector('.loader');\nconst galleryClass = document.querySelector('.gallery');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  preloading: false\n});\n\nexport function showLoader(){\n  loaderClass.classList.remove('hidden');\n}\n\nexport function removeLoader(){\n  loaderClass.classList.add('hidden');\n}\n\nexport function clearGallery(){\n    galleryClass.innerHTML = '';\n  }\n\n\nexport function createGallery(images){\n    \n    galleryClass.innerHTML = images.map( (el) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`).join('');\n    \n    gallery.refresh();\n  }\n\n\nexport function removeLoadMoreButton() {\n    showMoreBtnClass.classList.add('hidden');\n}\n  \nexport function showLoadMoreButton() {\n    showMoreBtnClass.classList.remove('hidden');\n}\n\nexport function getImageDimensions(){\n    const imageClass = document.querySelector('.gallery-item');\n    const gap = 24;\n    return imageClass.getBoundingClientRect().height + 2*gap;\n}","\nimport axios from 'axios'\nconst API_KEY = '53125865-ed9f58673896f3ad0b9dfa3df';\n\nexport async function getImages(query, page, limit) {\n  let searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: limit,\n      page: page\n    });\n  const response = await axios({\n      method: 'get',\n      url: `https://pixabay.com/api/?${searchParams}`\n    });\n  return {array: response.data.hits,\n  totalHits: response.data.totalHits}\n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { clearGallery, createGallery, removeLoader, showLoader, showLoadMoreButton, removeLoadMoreButton, getImageDimensions } from \"./js/render-functions\";\nimport {getImages} from \"./js/pixabay-api\";\nconst API_KEY = '53125865-ed9f58673896f3ad0b9dfa3df';\n\nconst submitBtnClass = document.querySelector('.submit-btn');\nconst inputQueryClass = document.querySelector('.form-input');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n//Initialize global variables\n\nlet page = 1; \nlet limit = 15;\nlet currentquery = '';\nlet totalHits = 0;\nlet allImages = [];\n\n\n\n\n// Start with the task\nremoveLoader();\nremoveLoadMoreButton();\n\nsubmitBtnClass.addEventListener('click', async () =>{\n\n  const query = inputQueryClass.value.trim();\n  if (!query){\n    clearGallery();\n    removeLoadMoreButton();\n    iziToast.error({message: 'Please enter a query', position: 'topRight'});\n    return;\n  }\n\n  showLoader();\n\n  try {\n    currentquery = query;\n    page = 1;\n    allImages = [];\n    clearGallery();\n\n    const images = await getImages(query, page, limit);\n    if (images.array.length === 0){\n      removeLoader();\n      removeLoadMoreButton();\n      iziToast.error({message: 'No images were found. Try another query.', position: 'topRight'});\n      return;\n    }\n\n    removeLoader();\n    allImages = images.array;\n    createGallery(images.array);\n    totalHits = images.totalHits;\n    page+=1;\n\n    if (page *limit <= totalHits){\n      showLoadMoreButton();  \n    } else{\n      iziToast.error({message: 'You have reached the limit.', position: 'topRight'});\n      removeLoadMoreButton();\n    }\n\n\n\n\n    \n  } catch (error) {\n    console.log(error);\n    iziToast.error({message: 'Something went wrong. Try again.', position:'topRight'});\n  }\n})\n\nshowMoreBtnClass.addEventListener('click', async () => {\n  showLoader();\n  try {\n    const newImages = await getImages(currentquery, page, limit);\n    allImages = allImages.concat(newImages.array);\n    removeLoader();\n\n    createGallery(allImages);\n\n    setTimeout(() => {\n      let elemHeight = getImageDimensions();\n      window.scrollBy({\n        top: elemHeight*2,\n        behavior: \"smooth\",\n      });\n    }, 100);\n\n    page +=1;\n\n    if (page*limit > totalHits){\n      removeLoadMoreButton();\n      iziToast.error({message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight'});\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({message: 'Something went wrong. Try again.', position:'topRight'});\n  }\n})\n\n\n\n"],"names":["loaderClass","galleryClass","showMoreBtnClass","gallery","SimpleLightbox","showLoader","removeLoader","clearGallery","createGallery","images","el","removeLoadMoreButton","showLoadMoreButton","getImageDimensions","API_KEY","getImages","query","page","limit","searchParams","response","axios","submitBtnClass","inputQueryClass","currentquery","totalHits","allImages","iziToast","error","newImages","elemHeight"],"mappings":"owBAGA,MAAMA,EAAc,SAAS,cAAc,SAAS,EAC9CC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAmB,SAAS,cAAc,gBAAgB,EAEhE,IAAIC,EAAU,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,IACd,WAAY,EACd,CAAC,EAEM,SAASC,GAAY,CAC1BL,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASM,GAAc,CAC5BN,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEO,SAASO,GAAc,CAC1BN,EAAa,UAAY,EAC1B,CAGI,SAASO,EAAcC,EAAO,CAEjCR,EAAa,UAAYQ,EAAO,IAAMC,GAAO;AAAA,sCACXA,EAAG,aAAa;AAAA;AAAA;AAAA,iBAGrCA,EAAG,YAAY;AAAA,iBACfA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCASUA,EAAG,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIRA,EAAG,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIRA,EAAG,QAAQ;AAAA;AAAA;AAAA;AAAA,kCAIXA,EAAG,SAAS;AAAA;AAAA;AAAA;AAAA,UAIpC,EAAE,KAAK,EAAE,EAEfP,EAAQ,QAAO,CAChB,CAGI,SAASQ,GAAuB,CACnCT,EAAiB,UAAU,IAAI,QAAQ,CAC3C,CAEO,SAASU,GAAqB,CACjCV,EAAiB,UAAU,OAAO,QAAQ,CAC9C,CAEO,SAASW,GAAoB,CAGhC,OAFmB,SAAS,cAAc,eAAe,EAEvC,sBAAqB,EAAG,OAAS,EADvC,EAEhB,CC1EA,MAAMC,EAAU,qCAET,eAAeC,EAAUC,EAAOC,EAAMC,EAAO,CAClD,IAAIC,EAAe,IAAI,gBAAgB,CACnC,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACZ,CAAK,EACH,MAAMG,EAAW,MAAMC,EAAM,CACzB,OAAQ,MACR,IAAK,4BAA4BF,CAAY,EACnD,CAAK,EACH,MAAO,CAAC,MAAOC,EAAS,KAAK,KAC7B,UAAWA,EAAS,KAAK,SAAS,CACpC,CCdA,MAAME,EAAiB,SAAS,cAAc,aAAa,EACrDC,EAAkB,SAAS,cAAc,aAAa,EACtDrB,EAAmB,SAAS,cAAc,gBAAgB,EAGhE,IAAIe,EAAO,EACPC,EAAQ,GACRM,EAAe,GACfC,EAAY,EACZC,EAAY,CAAA,EAMhBpB,IACAK,IAEAW,EAAe,iBAAiB,QAAS,SAAW,CAElD,MAAMN,EAAQO,EAAgB,MAAM,KAAI,EACxC,GAAI,CAACP,EAAM,CACTT,IACAI,IACAgB,EAAS,MAAM,CAAC,QAAS,uBAAwB,SAAU,UAAU,CAAC,EACtE,MACD,CAEDtB,IAEA,GAAI,CACFmB,EAAeR,EACfC,EAAO,EACPS,EAAY,CAAA,EACZnB,IAEA,MAAME,EAAS,MAAMM,EAAUC,EAAOC,EAAMC,CAAK,EACjD,GAAIT,EAAO,MAAM,SAAW,EAAE,CAC5BH,IACAK,IACAgB,EAAS,MAAM,CAAC,QAAS,2CAA4C,SAAU,UAAU,CAAC,EAC1F,MACD,CAEDrB,IACAoB,EAAYjB,EAAO,MACnBD,EAAcC,EAAO,KAAK,EAC1BgB,EAAYhB,EAAO,UACnBQ,GAAM,EAEFA,EAAMC,GAASO,EACjBb,KAEAe,EAAS,MAAM,CAAC,QAAS,8BAA+B,SAAU,UAAU,CAAC,EAC7EhB,IAOH,OAAQiB,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBD,EAAS,MAAM,CAAC,QAAS,mCAAoC,SAAS,UAAU,CAAC,CAClF,CACH,CAAC,EAEDzB,EAAiB,iBAAiB,QAAS,SAAY,CACrDG,IACA,GAAI,CACF,MAAMwB,EAAY,MAAMd,EAAUS,EAAcP,EAAMC,CAAK,EAC3DQ,EAAYA,EAAU,OAAOG,EAAU,KAAK,EAC5CvB,IAEAE,EAAckB,CAAS,EAEvB,WAAW,IAAM,CACf,IAAII,EAAajB,IACjB,OAAO,SAAS,CACd,IAAKiB,EAAW,EAChB,SAAU,QAClB,CAAO,CACF,EAAE,GAAG,EAENb,GAAO,EAEHA,EAAKC,EAAQO,IACfd,IACAgB,EAAS,MAAM,CAAC,QAAS,6DAA8D,SAAU,UAAU,CAAC,EAE/G,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBD,EAAS,MAAM,CAAC,QAAS,mCAAoC,SAAS,UAAU,CAAC,CAClF,CACH,CAAC"}