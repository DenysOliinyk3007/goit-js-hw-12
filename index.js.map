{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loaderClass = document.querySelector('.loader');\nconst galleryClass = document.querySelector('.gallery');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  preloading: false\n});\n\nexport function showLoader(){\n  loaderClass.classList.remove('hidden');\n}\n\nexport function removeLoader(){\n  loaderClass.classList.add('hidden');\n}\n\nexport function clearGallery(){\n    galleryClass.innerHTML = '';\n  }\n\n\nexport function createGallery(images){\n    \n    const markup = images.map( (el) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`).join('');\n    galleryClass.innerHTML = markup;\n    gallery.refresh();\n  }\n\n  export function appendToGallery(images){\n    \n    const markup = images.map( (el) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${el.webformatURL}\"\n          alt=\"${el.tags}\"\n          width=\"360\"\n          height=\"200\"\n        />\n      </a>\n      <div class=\"card\">\n        <ul>\n          <li>\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${el.likes}</p>\n          </li>\n          <li>\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${el.views}</p>\n          </li>\n          <li>\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${el.comments}</p>\n          </li>\n          <li>\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${el.downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </li>`).join('');\n    galleryClass.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n  }\n\nexport function removeLoadMoreButton() {\n    showMoreBtnClass.classList.add('hidden');\n}\n  \nexport function showLoadMoreButton() {\n    showMoreBtnClass.classList.remove('hidden');\n}\n\nexport function getImageDimensions(){\n    const imageClass = document.querySelector('.gallery-item');\n    const gap = 24;\n    return imageClass.getBoundingClientRect().height + 2*gap;\n}","import axios from 'axios'\nconst API_KEY = '53125865-ed9f58673896f3ad0b9dfa3df';\n\nexport async function getImages(query, page, limit) {\n  let searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: limit,\n      page: page\n    });\n  const response = await axios({\n      method: 'get',\n      url: `https://pixabay.com/api/?${searchParams}`\n    });\n  return {array: response.data.hits,\n  totalHits: response.data.totalHits}\n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { clearGallery, createGallery, removeLoader, showLoader, showLoadMoreButton, removeLoadMoreButton, getImageDimensions, appendToGallery } from \"./js/render-functions\";\nimport {getImages} from \"./js/pixabay-api\";\nconst API_KEY = '53125865-ed9f58673896f3ad0b9dfa3df';\n\nconst submitBtnClass = document.querySelector('.submit-btn');\nconst inputQueryClass = document.querySelector('.form-input');\nconst showMoreBtnClass = document.querySelector('.show-more-btn');\n//Initialize global variables\n\nlet page = 1; \nlet limit = 15;\nlet currentquery = '';\nlet totalHits = 0;\nlet allImages = [];\n\n\n\n\n// Start with the task\nremoveLoader();\nremoveLoadMoreButton();\n\nsubmitBtnClass.addEventListener('click', async (evt) =>{\n  evt.preventDefault();\n  removeLoadMoreButton();\n  const query = inputQueryClass.value.trim();\n  if (!query){\n    clearGallery();\n    removeLoadMoreButton();\n    iziToast.error({message: 'Please enter a query', position: 'topRight'});\n    return;\n  }\n\n  showLoader();\n\n  try {\n    currentquery = query;\n    page = 1;\n    allImages = [];\n    clearGallery();\n\n    const images = await getImages(query, page, limit);\n    if (images.array.length === 0){\n      removeLoader();\n      removeLoadMoreButton();\n      iziToast.error({message: 'No images were found. Try another query.', position: 'topRight'});\n      return;\n    }\n\n    removeLoader();\n    allImages = images.array;\n    createGallery(images.array);\n    totalHits = images.totalHits;\n    page+=1;\n\n    if (page *limit <= totalHits){\n      showLoadMoreButton();  \n    } else{\n      iziToast.message({message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight'});\n      removeLoadMoreButton();\n    }\n\n    \n  } catch (error) {\n    removeLoader();\n    console.log(error);\n    iziToast.error({message: 'Something went wrong. Try again.', position:'topRight'});\n  }\n})\n\nshowMoreBtnClass.addEventListener('click', async (evt) => {\n  evt.preventDefault();\n  removeLoadMoreButton();\n  showLoader();\n  try {\n    const newImages = await getImages(currentquery, page, limit);\n    allImages = allImages.concat(newImages.array);\n    removeLoader();\n\n    appendToGallery(newImages.array);\n\n    setTimeout(() => {\n      let elemHeight = getImageDimensions();\n      window.scrollBy({\n        top: elemHeight*2,\n        behavior: \"smooth\",\n      });\n    }, 100);\n\n    page +=1;\n    \n\n    if (page*limit > totalHits){\n      removeLoadMoreButton();\n      iziToast.show({message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight'});\n    } else{\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    removeLoader();\n    removeLoadMoreButton();\n    iziToast.error({message: 'Something went wrong. Try again.', position:'topRight'});\n  }\n})\n\n\n\n"],"names":["loaderClass","galleryClass","showMoreBtnClass","gallery","SimpleLightbox","showLoader","removeLoader","clearGallery","createGallery","images","markup","el","appendToGallery","removeLoadMoreButton","showLoadMoreButton","getImageDimensions","API_KEY","getImages","query","page","limit","searchParams","response","axios","submitBtnClass","inputQueryClass","currentquery","totalHits","allImages","evt","iziToast","error","newImages","elemHeight"],"mappings":"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"}